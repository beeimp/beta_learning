# 10장 데이터를 입력/수정/삭제하고 트랜잭션 처리하기

## 1. 학습 날짜

- 2021년 7월 30일

## 2. 학습진도

- 10장 데이터를 입력/수정/삭제하고 트랜잭션 처리하기

## 3. 학습내용

### 1) INSERT 문으로 데이터 입력하기

1. 기본형 INSERT 문
   ```sql
   INSERT INTO 테이블명 (컬럼1, 컬럼2 ...)
   VALUES (값1, 값2, ...);
   ```
   - 컬럼 리스트와 값 리스트는 개수와 순서, 데이터 타입이 반드시 일치해야 함
     - but, 테이블에서 정의한 컬럼 수서를 따를 필요는 없음
   - NOT NULL 속성이 설정되었다면 반드시 값 입력
   - 기본키로 설정된 컬럼 또한 반드시 값을 입력하고, 중복 값을 허용 안함
   - 컬럼 리스트 생략 시 정의한 테이블 컬럼 순서를 따름
2. 변형 INSERT 문
   - 기본형과 다르게 여러 행을 입력할 수 있음
   ```sql
   INSERT INTO 테이블명 (컬럼1, 컬럼2 ...)
   VALUES [ROW](값1, 값2, ...), [ROW](값1, 값2, ...) ...;
   ```
3. SELECT 문이 결합된 INSERT 문
   ```sql
   INSERT INTO 테이블명 (컬럼1, 컬럼2 ...)
   SELECT ...
   FROM ...
   WHERE ...
   ...;
   ```
   - 실행한 SELECT 문의 결과 집합을 추가
   - 추가하려는 테이블에서 요구하는 컬럼을 맞춰야함!

### 2) UPDATE 문으로 데이터 수정하기

1. 단일 테이블 UPDATE 문
   ```sql
   UPDATE 테이블명
   SET
       컬럼1 = 값1,
       컬럼2 = 값2,
       ...
   WHERE ...,
   ORDER BY ...,
   LIMIT ...;
   ```
   - 기본키 컬럼 값은 수정하지 말자!
   - 서로 참조 관계에 있는 테이블을 구성할 때, 전자와 후자를 각각 부모 테이블과 자식 테이블로 구성해 외래키를 설정하면 기본 키 컬림이 변경되는 것을 방지할 수 있음
2. 다중 테이블 UPDATE 문
   - 두 개 이상의 테이블을 대상으로 값 변경 가능
   - 다른 테이블의 값을 참조해 변경 가능
   - 여러 테이블의 값을 동시에 변경 가능
   ```sql
   UPDATE 테이블명1, 테이블명2, ...
   SET
       컬럼1 = 값1,
       컬럼2 = 값2,
       ...
   WHERE 조건
   ```
3. 입력과 수정을 동시에 처리하기
   - 신규 데이터를 입력하는 동시에 수정하는 방법
   ```sql
   INSERT INTO 테이블명 (컬럼1, 컬럼2 ...)
   VALUES 절(또는 SELECT 문)
   ON DUPLICATE KEY UPDATE 컬럼1 = 값1, ...
   ...;
   ```

### 3) DELETE 문으로 데이터 삭제하기

1. 단일 테이블 DELETE 문
   ```sql
   DELETE FROM 테이블명
   WHERE 조건 -- 생략하면 데이터 전체 삭제
   ORDER BY ... - 명시한 컬럼 값 순서대로 삭제
   LIMIT ... - 삭제 개수 제한
   ```
2. 다중 테이블 DELETE 문

   ```sql
   -- 방법 1
   DELETE 테이블별칭1, 테이블별칭2, ...
   FROM 테이블명1 테이블별칭1, 테이블명2 테이블별칭2,
   WHERE 조건

   -- 방법 2
   DELETE FROM 테이블별칭1, 테이블별칭2, ...
   USING
   WHERE 조건
   ```

   - DELETE와 FROM 사이에 기술하는 별칭에 해당되는 테이블만 삭제
   - FROM절에 명시한 테이블 간의 조인 조건이나 필터 조건을 기술할 수 있음

## 4. 새롭게 알게된 사실(신선했던 것, 유용했던 점)

## 5. 학습 리뷰

- 408페이지 구분 10-3에서 ;이 빠졌습니다.
- 415페이지 구분 10-4에서 ;이 빠졌습니다.
- 420-421페이지 구분 10-5에서 ;이 빠졌습니다.
- 420페이지 10.2.2 다중 테이블 UPDATE 문의 마지막에서 두번째 줄에 "다른 하나는 두 테이블의 값을 동시에..."을 "다른 하나는 여러 테이블의 값을 동시에..."으로 두 개 이상의 테이블이니 "여러 테이블의 값을" 또는 "두 개이상의 테이블 값을" 이렇게 바꾸는건 어떨까요?
- 432페이지 구문 10-8과 436페이지 구문 10-9에서 테이블별칭1, ...과 별칭1, ...을 통일시켜줘야 할 것 같습니다. 모른시는 분들은 다른거라고 착각하실 수도 있을거 같아요.
